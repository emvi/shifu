{{ $langs := .Data.Languages }}
{{ $copy := .Data.Copy }}
{{ $data := .Data.Data }}

<form method="post"
      hx-post="{{ config.UI.Path }}/content/element/edit?path={{ .Data.Path }}&element={{ .Data.ElementPath }}"
      hx-swap="none"
      hx-target-4*="this"
      hx-on::after-request="shifuCloseWindow('#shifu-page-element-edit')">
    {{ if len .Data.Config.Copy }}
        <details class="collapsible" open>
            <summary>Inhalt</summary>

            {{ range $field, $cfg := .Data.Config.Copy }}
                {{
                    template "page-element-edit-field.html"
                    dict "field" $field
                        "cfg" $cfg
                        "langs" $langs
                        "copy" $copy
                }}
            {{ end }}
        </details>
    {{ end }}

    {{ if len .Data.Config.Data }}
        <details class="collapsible">
            <summary>Einstellungen</summary>

            {{ range $field, $cfg := .Data.Config.Data }}
                {{
                    template "page-element-edit-field.html"
                    dict "field" $field
                        "cfg" $cfg
                        "data" $data
                }}
            {{ end }}
        </details>
    {{ end }}

    <div class="shifu-toolbelt">
        <input type="submit" value="Speichern" />
        <button class="secondary shifu-window-close" hx-trigger="click">
            Abbrechen
        </button>
    </div>
</form>
