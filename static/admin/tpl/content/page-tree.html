{{ define "page-element-tree" }}
    {{ range $content, $elements := index . "content" }}
        <div>
            <small>
                {{ $content }}
            </small>
            <ul>
                {{ range $element := $elements }}
                    <li>
                        <details>
                            <summary
                                {{ if $element.Ref }}
                                    class="shifu-page-tree-ref"
                                {{ else if len $element.Content }}
                                    class="shifu-page-tree-container"
                                {{ else }}
                                    class="shifu-page-tree-element"
                                {{ end }}>
                                <span>
                                    {{ $element.Tpl }}
                                    {{ $element.Ref }}
                                </span>
                                <span>
                                    <img src="{{ config.UI.Path }}/static/icons/edit.svg"
                                         alt=""
                                         title="Bearbeiten"
                                         hx-get="{{ config.UI.Path }}/content/element/edit"
                                         hx-target="body"
                                         hx-swap="beforeend" />
                                    <img src="{{ config.UI.Path }}/static/icons/add.svg"
                                         alt=""
                                         title="Element hinzufügen"
                                         hx-get="{{ config.UI.Path }}/content/element/add"
                                         hx-target="body"
                                         hx-swap="beforeend" />
                                    <img src="{{ config.UI.Path }}/static/icons/chevron.svg"
                                         alt=""
                                         title="Nach oben verschieben"
                                         hx-get="{{ config.UI.Path }}/content/element/move"
                                         hx-target="body"
                                         hx-swap="beforeend" />
                                    <img src="{{ config.UI.Path }}/static/icons/chevron.svg"
                                         alt=""
                                         title="Nach unten verschieben"
                                         style="transform: rotate(180deg);"
                                         hx-get="{{ config.UI.Path }}/content/element/move"
                                         hx-target="body"
                                         hx-swap="beforeend" />
                                    <img src="{{ config.UI.Path }}/static/icons/delete.svg"
                                         alt=""
                                         title="Löschen"
                                         hx-get="{{ config.UI.Path }}/content/element/delete"
                                         hx-target="body"
                                         hx-swap="beforeend" />
                                </span>
                            </summary>

                            {{ if len $element.Content }}
                                {{ template "page-element-tree" dict "content" $element.Content }}
                            {{ end }}
                        </details>
                    </li>
                {{ end }}
            </ul>
        </div>
    {{ end }}
{{ end }}

<div style="margin-bottom: 8px;">
    {{ template "page-element-tree" dict "content" .Data.Page.Content }}
</div>
<button title="Element hinzufügen"
        hx-get="{{ config.UI.Path }}/content/element/add"
        hx-target="body"
        hx-swap="beforeend">
    <img src="{{ config.UI.Path }}/static/icons/add.svg" alt="" />
    Element hinzufügen
</button>
