(()=>{function m(a,r=300){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{a.apply(this,n)},r)}}var o={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};Trix.config.toolbar.getDefaultHTML=()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="${o.bold}" tabindex="-1">${o.bold}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="${o.italic}" tabindex="-1">${o.italic}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="${o.strike}" tabindex="-1">${o.strike}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="${o.link}" tabindex="-1">${o.link}</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="${o.quote}" tabindex="-1">${o.quote}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="${o.code}" tabindex="-1">${o.code}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="${o.bullets}" tabindex="-1">${o.bullets}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="${o.numbers}" tabindex="-1">${o.numbers}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="${o.outdent}" tabindex="-1">${o.outdent}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="${o.indent}" tabindex="-1">${o.indent}</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="${o.undo}" tabindex="-1">${o.undo}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="${o.redo}" tabindex="-1">${o.redo}</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="${o.urlPlaceholder}" aria-label="${o.url}" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="${o.link}" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="${o.unlink}" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`;window.shifuTree=function(a){let r=document.getElementById(a);if(!r){console.error("Shifu tree element not found",a);return}let i=new Map,n=localStorage.getItem(a);n&&(i=new Map(JSON.parse(n))),r.querySelectorAll("details").forEach(u=>{let b=u.getAttribute("data-entry");i.get(b)&&u.setAttribute("open",""),u.addEventListener("click",x=>{let d=x.target;for(;!d.hasAttribute("data-entry");)d=d.parentNode;let c=d.getAttribute("data-entry");d.hasAttribute("open")?i.delete(c):i.set(c,!0),localStorage.setItem(a,JSON.stringify(Array.from(i.entries())))})})};window.shifuAddElement=function(a,r){let i=document.getElementById("shifu-new-element");if(i){let n=document.querySelector(`slot[name='${a}/${r}']`);if(n){let u=n.parentElement;u.appendChild(i.content),n.remove(),u.appendChild(n)}else document.body.appendChild(i.content)}else console.error("New element template not found"),location.reload()};window.shifuMoveElement=function(a,r){let i=document.querySelector(`[data-shifu-element='${a}']`);if(i)if(r==="up"){let n=i.previousElementSibling;for(;!n.hasAttribute("data-shifu-element");)n=n.previousElementSibling;if(!n){console.error("Previous element not found",a),location.reload();return}let u=n.getAttribute("data-shifu-element");n.setAttribute("data-shifu-element",i.getAttribute("data-shifu-element")),i.setAttribute("data-shifu-element",u),i.parentNode.insertBefore(i,n)}else{let n=i.nextElementSibling;for(;!n.hasAttribute("data-shifu-element");)n=n.nextElementSibling;if(!n){console.error("Next element not found",a),location.reload();return}let u=n.getAttribute("data-shifu-element");n.setAttribute("data-shifu-element",i.getAttribute("data-shifu-element")),i.setAttribute("data-shifu-element",u),i.parentNode.insertBefore(n,i)}else console.error("Element to move not found",a,r),location.reload()};window.shifuDeleteElement=function(a){let r=document.querySelector(`[data-shifu-element='${a}']`);r?r.remove():(console.error("Element to delete not found",a),location.reload())};(function(){document.addEventListener("htmx:beforeRequest",t=>{let e=t.target.getAttribute("data-window");if(e){let s=document.getElementById(e);s&&(c(t),s.remove(),t.preventDefault())}}),document.addEventListener("htmx:afterProcessNode",t=>{if(t.target.classList.contains("shifu-window")||t.target.classList.contains("shifu-window-overlay")){let e=t.target;e.classList.contains("shifu-window-overlay")&&(e=e.children[0]),document.querySelectorAll(".shifu-window").forEach(l=>l.classList.remove("shifu-window-active")),e.classList.add("shifu-window-active");let s=e.querySelector(".shifu-window-title");if(s){let l=localStorage.getItem(e.id);if(l){let f=JSON.parse(l);e.style.top=f.top,e.style.left=f.left}s.addEventListener("mousedown",b),s.addEventListener("mouseup",x)}}}),document.addEventListener("htmx:beforeCleanupElement",c),document.addEventListener("htmx:trigger",t=>{if(t.target.classList.contains("shifu-window-close")){c(t);let e=t.target;for(;!e.classList.contains("shifu-window");)e=e.parentNode;e.parentNode&&e.parentNode.classList.contains("shifu-window-overlay")&&e.parentNode.remove(),e.remove()}}),window.addEventListener("mousemove",d);let a=m(t=>{localStorage.setItem(t.id,JSON.stringify({top:t.style.top,left:t.style.left}))}),r=null,i,n,u=0;function b(t){document.querySelectorAll(".shifu-window").forEach(e=>e.classList.remove("shifu-window-active")),r=t.target.parentNode,r.style.zIndex>u&&(u=r.style.zIndex),u++,r.style.zIndex=u,r.classList.add("shifu-window-active"),i=t.clientX,n=t.clientY}function x(){r=null}function d(t){if(r){let e=i-t.clientX,s=n-t.clientY;i=t.clientX,n=t.clientY,r.style.top=r.offsetTop-s+"px",r.style.left=r.offsetLeft-e+"px",a(r)}}function c(t){if(t.target.classList&&t.target.classList.contains("shifu-window")){let e=t.target.querySelector(".shifu-window-title");e&&(e.removeEventListener("mousedown",b),e.removeEventListener("mouseup",x))}}document.addEventListener("htmx:afterRequest",t=>{let e=t.target.getAttribute("data-window");if(e){let s=document.querySelector(e);if(!s)return;for(;!s.classList.contains("shifu-window");)s=s.parentNode;let l=s.querySelector(".shifu-window-title");l&&(l.removeEventListener("mousedown",b),l.removeEventListener("mouseup",x)),s.parentNode&&s.parentNode.classList.contains("shifu-window-overlay")&&s.parentNode.remove(),s.remove()}})})();})();
//# sourceMappingURL=admin.js.map
