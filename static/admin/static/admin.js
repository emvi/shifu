(()=>{(function(){document.addEventListener("htmx:beforeRequest",t=>{let e=t.target.getAttribute("data-window");if(e){let i=document.getElementById(e);i&&(a(t),i.remove(),t.preventDefault())}}),document.addEventListener("htmx:afterProcessNode",t=>{if(t.target.classList.contains("shifu-window")||t.target.classList.contains("shifu-window-overlay")){let e=t.target;e.classList.contains("shifu-window-overlay")&&(e=e.children[0]);let i=e.querySelector(".shifu-window-title");if(i){let o=localStorage.getItem(e.id);if(o){let f=JSON.parse(o);e.style.top=f.top,e.style.left=f.left}i.addEventListener("mousedown",d),i.addEventListener("mouseup",c)}}}),document.addEventListener("htmx:beforeCleanupElement",a),document.addEventListener("htmx:trigger",t=>{if(t.target.classList.contains("shifu-window-close")){a(t);let e=t.target;for(;!e.classList.contains("shifu-window");)e=e.parentNode;e.parentNode.classList.contains("shifu-window-overlay")&&e.parentNode.remove(),e.remove()}}),window.addEventListener("mousemove",m);let u=w(t=>{localStorage.setItem(t.id,JSON.stringify({top:t.style.top,left:t.style.left}))}),n=null,l,r,s=0;function d(t){n=t.target.parentNode,n.style.zIndex>s&&(s=n.style.zIndex),s++,n.style.zIndex=s,l=t.clientX,r=t.clientY}function c(){n=null}function m(t){if(n){let e=l-t.clientX,i=r-t.clientY;l=t.clientX,r=t.clientY,n.style.top=n.offsetTop-i+"px",n.style.left=n.offsetLeft-e+"px",u(n)}}function a(t){if(t.target.classList.contains("shifu-window")){let e=t.target.querySelector(".shifu-window-title");e&&(e.removeEventListener("mousedown",d),e.removeEventListener("mouseup",c))}}function w(t,e=300){let i;return(...o)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(this,o)},e)}}})();})();
//# sourceMappingURL=admin.js.map
