(()=>{function m(s,t=300){let o;return(...e)=>{clearTimeout(o),o=setTimeout(()=>{s.apply(this,e)},t)}}var r={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};document.addEventListener("trix-before-initialize",()=>{Trix.config.blockAttributes.default.tagName="p",Trix.config.toolbar.getDefaultHTML=()=>`<div class="trix-button-row">
          <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
            <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="${r.bold}" tabindex="-1">${r.bold}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="${r.italic}" tabindex="-1">${r.italic}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="${r.strike}" tabindex="-1">${r.strike}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="${r.link}" tabindex="-1">${r.link}</button>
          </span>
        
          <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
            <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="${r.quote}" tabindex="-1">${r.quote}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="${r.code}" tabindex="-1">${r.code}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="${r.bullets}" tabindex="-1">${r.bullets}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="${r.numbers}" tabindex="-1">${r.numbers}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="${r.outdent}" tabindex="-1">${r.outdent}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="${r.indent}" tabindex="-1">${r.indent}</button>
          </span>
        
          <span class="trix-button-group-spacer"></span>
        
          <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
            <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="${r.undo}" tabindex="-1">${r.undo}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="${r.redo}" tabindex="-1">${r.redo}</button>
          </span>
        </div>
        
        <div class="trix-dialogs" data-trix-dialogs>
          <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
            <div class="trix-dialog__link-fields">
              <input type="text" name="href" class="trix-input trix-input--dialog" placeholder="${r.urlPlaceholder}" aria-label="${r.url}" data-trix-validate-href required data-trix-input>
              <div class="trix-button-group">
                <input type="button" class="trix-button trix-button--dialog" value="${r.link}" data-trix-method="setAttribute">
                <input type="button" class="trix-button trix-button--dialog" value="${r.unlink}" data-trix-method="removeAttribute">
              </div>
            </div>
          </div>
        </div>`});window.shifuTree=function(s){let t=document.getElementById(s);if(!t){console.error("Shifu tree element not found",s);return}let o=new Map,e=localStorage.getItem(s);e&&(o=new Map(JSON.parse(e))),t.querySelectorAll("details").forEach(a=>{let b=a.getAttribute("data-entry");o.get(b)&&a.setAttribute("open",""),a.addEventListener("click",f=>{let d=f.target;for(;!d.hasAttribute("data-entry");)d=d.parentNode;let c=d.getAttribute("data-entry");d.hasAttribute("open")?o.delete(c):o.set(c,!0),localStorage.setItem(s,JSON.stringify(Array.from(o.entries())))})})};window.shifuAddElement=function(s,t){let o=document.getElementById("shifu-new-element");if(o){let e=document.querySelector(`slot[name='${s}/${t}']`);if(e){let a=e.parentElement;a.appendChild(o.content),e.remove(),a.appendChild(e)}else document.body.appendChild(o.content)}else console.error("New element template not found"),location.reload()};window.shifuMoveElement=function(s,t){let o=document.querySelector(`[data-shifu-element='${s}']`);if(o)if(t==="up"){let e=o.previousElementSibling;for(;!e.hasAttribute("data-shifu-element");)e=e.previousElementSibling;if(!e){console.error("Previous element not found",s),location.reload();return}let a=e.getAttribute("data-shifu-element");e.setAttribute("data-shifu-element",o.getAttribute("data-shifu-element")),o.setAttribute("data-shifu-element",a),o.parentNode.insertBefore(o,e)}else{let e=o.nextElementSibling;for(;!e.hasAttribute("data-shifu-element");)e=e.nextElementSibling;if(!e){console.error("Next element not found",s),location.reload();return}let a=e.getAttribute("data-shifu-element");e.setAttribute("data-shifu-element",o.getAttribute("data-shifu-element")),o.setAttribute("data-shifu-element",a),o.parentNode.insertBefore(e,o)}else console.error("Element to move not found",s,t),location.reload()};window.shifuDeleteElement=function(s){let t=document.querySelector(`[data-shifu-element='${s}']`);if(t){let o=t.parentElement,e=!1;for(let a of o.children)e?a.hasAttribute("data-shifu-element")&&a.setAttribute("data-shifu-element",p(a.getAttribute("data-shifu-element"))):e=a.getAttribute("data-shifu-element")===t.getAttribute("data-shifu-element");t.remove()}else console.error("Element to delete not found",s),location.reload()};function p(s){let t=s.split(".");return t[t.length-1]=parseInt(t[t.length-1])-1,t.join(".")}(function(){let s=m(n=>{localStorage.setItem(n.id,JSON.stringify({top:n.style.top,left:n.style.left}))}),t=null,o,e,a=1e5;document.addEventListener("htmx:beforeRequest",n=>{let i=n.target.getAttribute("data-window");if(i){let u=document.getElementById(i);u&&(c(n),u.remove(),n.preventDefault())}}),document.addEventListener("htmx:afterProcessNode",n=>{if(n.target.classList.contains("shifu-window")||n.target.classList.contains("shifu-window-overlay")){let i=n.target;i.classList.contains("shifu-window-overlay")&&(i=i.children[0]),document.querySelectorAll(".shifu-window").forEach(l=>l.classList.remove("shifu-window-active")),i.classList.add("shifu-window-active"),a++,i.style.zIndex=a;let u=i.querySelector(".shifu-window-title");if(u){let l=localStorage.getItem(i.id);if(l){let x=JSON.parse(l);i.style.top=x.top,i.style.left=x.left}u.addEventListener("mousedown",b),u.addEventListener("mouseup",f)}}}),document.addEventListener("htmx:beforeCleanupElement",c),document.addEventListener("htmx:trigger",n=>{if(n.target.classList.contains("shifu-window-close")){c(n);let i=n.target;for(;!i.classList.contains("shifu-window");)i=i.parentNode;i.parentNode&&i.parentNode.classList.contains("shifu-window-overlay")&&i.parentNode.remove(),i.remove()}}),window.addEventListener("mousemove",d);function b(n){document.querySelectorAll(".shifu-window").forEach(i=>i.classList.remove("shifu-window-active")),t=n.target.parentNode,t.style.zIndex>a&&(a=t.style.zIndex),a++,t.style.zIndex=a,t.classList.add("shifu-window-active"),o=n.clientX,e=n.clientY}function f(){t=null}function d(n){if(t){let i=o-n.clientX,u=e-n.clientY;o=n.clientX,e=n.clientY,t.style.top=t.offsetTop-u+"px",t.style.left=t.offsetLeft-i+"px",s(t)}}function c(n){if(n.target.classList&&n.target.classList.contains("shifu-window")){let i=n.target.querySelector(".shifu-window-title");i&&(i.removeEventListener("mousedown",b),i.removeEventListener("mouseup",f))}}document.addEventListener("htmx:afterRequest",n=>{let i=n.target.getAttribute("data-window");if(i){let u=document.querySelector(i);if(!u)return;for(;!u.classList.contains("shifu-window");)u=u.parentNode;let l=u.querySelector(".shifu-window-title");l&&(l.removeEventListener("mousedown",b),l.removeEventListener("mouseup",f)),u.parentNode&&u.parentNode.classList.contains("shifu-window-overlay")&&u.parentNode.remove(),u.remove()}})})();})();
//# sourceMappingURL=admin.js.map
