(()=>{function w(l,n=300){let i;return(...o)=>{clearTimeout(i),i=setTimeout(()=>{l.apply(this,o)},n)}}var r={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};document.addEventListener("trix-before-initialize",()=>{Trix.config.blockAttributes.default.tagName="p",Trix.config.toolbar.getDefaultHTML=()=>`<div class="trix-button-row">
          <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
            <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="${r.bold}" tabindex="-1">${r.bold}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="${r.italic}" tabindex="-1">${r.italic}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="${r.strike}" tabindex="-1">${r.strike}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="${r.link}" tabindex="-1">${r.link}</button>
          </span>
        
          <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
            <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="${r.quote}" tabindex="-1">${r.quote}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="${r.code}" tabindex="-1">${r.code}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="${r.bullets}" tabindex="-1">${r.bullets}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="${r.numbers}" tabindex="-1">${r.numbers}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="${r.outdent}" tabindex="-1">${r.outdent}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="${r.indent}" tabindex="-1">${r.indent}</button>
          </span>
        
          <span class="trix-button-group-spacer"></span>
        
          <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
            <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="${r.undo}" tabindex="-1">${r.undo}</button>
            <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="${r.redo}" tabindex="-1">${r.redo}</button>
          </span>
        </div>
        
        <div class="trix-dialogs" data-trix-dialogs>
          <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
            <div class="trix-dialog__link-fields">
              <input type="text" name="href" class="trix-input trix-input--dialog" placeholder="${r.urlPlaceholder}" aria-label="${r.url}" data-trix-validate-href required data-trix-input>
              <div class="trix-button-group">
                <input type="button" class="trix-button trix-button--dialog" value="${r.link}" data-trix-method="setAttribute">
                <input type="button" class="trix-button trix-button--dialog" value="${r.unlink}" data-trix-method="removeAttribute">
              </div>
            </div>
          </div>
        </div>`});function p(l){let n=729790;for(let i=0;i<l.length;i++)n=(n<<5)+n+l.charCodeAt(i);return(n>>>0).toString(16).slice(0,8)}window.shifuTree=function(l){let n=document.getElementById(l);if(!n){console.error("Shifu tree element not found",l);return}let i=new Map,o=localStorage.getItem(`${l}-${p(location.pathname)}`);o&&(i=new Map(JSON.parse(o))),n.querySelectorAll("details").forEach(s=>{let m=s.getAttribute("data-entry");i.get(m)&&s.setAttribute("open",""),s.addEventListener("click",d=>{let c=d.target;for(;!c.hasAttribute("data-entry");)c=c.parentNode;let b=c.getAttribute("data-entry");c.hasAttribute("open")?i.delete(b):i.set(b,!0),localStorage.setItem(`${l}-${p(location.pathname)}`,JSON.stringify(Array.from(i.entries())))})})};window.shifuAddElement=function(l,n){let i=document.getElementById("shifu-new-element");if(i){let o=document.querySelector(`slot[name='${l}/${n}']`);if(o){let s=o.parentElement;s.appendChild(i.content),o.remove(),s.appendChild(o)}else document.body.appendChild(i.content)}else console.error("New element template not found"),location.reload()};window.shifuMoveElement=function(l,n){let i=document.querySelector(`[data-shifu-element='${l}']`);if(i)if(n==="up"){let o=i.previousElementSibling;for(;!o.hasAttribute("data-shifu-element");)o=o.previousElementSibling;if(!o){console.error("Previous element not found",l),location.reload();return}let s=o.getAttribute("data-shifu-element");o.setAttribute("data-shifu-element",i.getAttribute("data-shifu-element")),i.setAttribute("data-shifu-element",s),i.parentNode.insertBefore(i,o)}else{let o=i.nextElementSibling;for(;!o.hasAttribute("data-shifu-element");)o=o.nextElementSibling;if(!o){console.error("Next element not found",l),location.reload();return}let s=o.getAttribute("data-shifu-element");o.setAttribute("data-shifu-element",i.getAttribute("data-shifu-element")),i.setAttribute("data-shifu-element",s),i.parentNode.insertBefore(o,i)}else console.error("Element to move not found",l,n),location.reload()};window.shifuDeleteElement=function(l){let n=document.querySelector(`[data-shifu-element='${l}']`);if(n){let i=n.parentElement,o=!1;for(let s of i.children)o?s.hasAttribute("data-shifu-element")&&s.setAttribute("data-shifu-element",v(s.getAttribute("data-shifu-element"))):o=s.getAttribute("data-shifu-element")===n.getAttribute("data-shifu-element");n.remove()}else console.error("Element to delete not found",l),location.reload()};function v(l){let n=l.split(".");return n[n.length-1]=parseInt(n[n.length-1])-1,n.join(".")}(function(){let l=w(e=>{localStorage.setItem(e.id,JSON.stringify({top:e.style.top,left:e.style.left}))}),n=null,i,o,s=1e5;document.addEventListener("htmx:beforeRequest",e=>{let t=e.target.getAttribute("data-window");if(t){let a=document.getElementById(t);a&&(b(e),a.remove(),e.preventDefault())}}),document.addEventListener("htmx:afterProcessNode",e=>{if(e.target.classList.contains("shifu-window")||e.target.classList.contains("shifu-window-overlay")){let t=e.target;t.classList.contains("shifu-window-overlay")&&(t=t.children[0]),document.querySelectorAll(".shifu-window").forEach(u=>u.classList.remove("shifu-window-active")),t.classList.add("shifu-window-active"),s++,t.style.zIndex=s;let a=t.querySelector(".shifu-window-title");if(a){let u=localStorage.getItem(t.id);if(u){let f=JSON.parse(u);t.style.top=f.top,t.style.left=f.left}a.addEventListener("mousedown",m),a.addEventListener("mouseup",d)}g(t)}}),document.addEventListener("htmx:beforeCleanupElement",b),document.addEventListener("htmx:trigger",e=>{if(e.target.classList.contains("shifu-window-close")){b(e);let t=e.target;for(;!t.classList.contains("shifu-window");)t=t.parentNode;t.parentNode&&t.parentNode.classList.contains("shifu-window-overlay")&&t.parentNode.remove(),t.remove()}}),window.addEventListener("mousemove",c),window.addEventListener("mouseup",d),window.addEventListener("resize",h);function m(e){document.querySelectorAll(".shifu-window").forEach(t=>t.classList.remove("shifu-window-active")),n=e.target.parentNode,n.style.zIndex>s&&(s=n.style.zIndex),s++,n.style.zIndex=s,n.classList.add("shifu-window-active"),i=e.clientX,o=e.clientY}function d(){n=null}function c(e){if(e.clientX<0||e.clientX>window.innerWidth||e.clientY<0||e.clientY>window.innerHeight){d();return}if(n){let t=i-e.clientX,a=o-e.clientY,u=n.offsetLeft-t,f=n.offsetTop-a;i=e.clientX,o=e.clientY;let x=n.getBoundingClientRect();t>0&&x.left<=0?u=0:t<0&&x.right>=window.innerWidth&&(u=window.innerWidth-x.width),a>0&&x.top<=0?f=0:a<0&&x.bottom>=window.innerHeight&&(f=window.innerHeight-x.height),n.style.top=f+"px",n.style.left=u+"px",l(n)}}function b(e){if(e.target.classList&&e.target.classList.contains("shifu-window")){let t=e.target.querySelector(".shifu-window-title");t&&(t.removeEventListener("mousedown",m),t.removeEventListener("mouseup",d))}}function h(){document.querySelectorAll(".shifu-window").forEach(e=>g(e))}function g(e){let t=e.getBoundingClientRect(),a=t.left,u=t.top;a<0?a=0:a+t.width>=window.innerWidth&&(a=window.innerWidth-t.width),u<0?u=0:u+t.height>=window.innerHeight&&(u=window.innerHeight-t.height),e.style.top=u+"px",e.style.left=a+"px"}document.addEventListener("htmx:afterRequest",e=>{let t=e.target.getAttribute("data-window");if(t){let a=document.querySelector(t);if(!a)return;for(;!a.classList.contains("shifu-window");)a=a.parentNode;let u=a.querySelector(".shifu-window-title");u&&(u.removeEventListener("mousedown",m),u.removeEventListener("mouseup",d)),a.parentNode&&a.parentNode.classList.contains("shifu-window-overlay")&&a.parentNode.remove(),a.remove()}})})();})();
//# sourceMappingURL=admin.js.map
