(()=>{function w(l,n=300){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{l.apply(this,s)},n)}}(function(){document.addEventListener("htmx:beforeRequest",t=>{let e=t.target.getAttribute("data-window");if(e){let o=document.getElementById(e);o&&(c(t),o.remove(),t.preventDefault())}}),document.addEventListener("htmx:afterProcessNode",t=>{if(t.target.classList.contains("shifu-window")||t.target.classList.contains("shifu-window-overlay")){let e=t.target;e.classList.contains("shifu-window-overlay")&&(e=e.children[0]);let o=e.querySelector(".shifu-window-title");if(o){let u=localStorage.getItem(e.id);if(u){let f=JSON.parse(u);e.style.top=f.top,e.style.left=f.left}o.addEventListener("mousedown",a),o.addEventListener("mouseup",d)}}}),document.addEventListener("htmx:beforeCleanupElement",c),document.addEventListener("htmx:trigger",t=>{if(t.target.classList.contains("shifu-window-close")){c(t);let e=t.target;for(;!e.classList.contains("shifu-window");)e=e.parentNode;e.parentNode&&e.parentNode.classList.contains("shifu-window-overlay")&&e.parentNode.remove(),e.remove()}}),window.addEventListener("mousemove",m);let l=w(t=>{localStorage.setItem(t.id,JSON.stringify({top:t.style.top,left:t.style.left}))}),n=null,i,s,r=0;function a(t){n=t.target.parentNode,n.style.zIndex>r&&(r=n.style.zIndex),r++,n.style.zIndex=r,i=t.clientX,s=t.clientY}function d(){n=null}function m(t){if(n){let e=i-t.clientX,o=s-t.clientY;i=t.clientX,s=t.clientY,n.style.top=n.offsetTop-o+"px",n.style.left=n.offsetLeft-e+"px",l(n)}}function c(t){if(t.target.classList&&t.target.classList.contains("shifu-window")){let e=t.target.querySelector(".shifu-window-title");e&&(e.removeEventListener("mousedown",a),e.removeEventListener("mouseup",d))}}window.shifuCloseWindow=t=>{let e=document.querySelector(t);if(!e)return;for(;!e.classList.contains("shifu-window");)e=e.parentNode;let o=e.querySelector(".shifu-window-title");o&&(o.removeEventListener("mousedown",a),o.removeEventListener("mouseup",d)),e.parentNode&&e.parentNode.classList.contains("shifu-window-overlay")&&e.parentNode.remove(),e.remove()}})();})();
//# sourceMappingURL=admin.js.map
