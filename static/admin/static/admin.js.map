{
  "version": 3,
  "sources": ["../assets/js/main.js"],
  "sourcesContent": ["(function() {\n    document.addEventListener(\"htmx:beforeRequest\", e => {\n        const id = e.target.getAttribute(\"data-window\");\n\n        if (id) {\n            const element = document.getElementById(id);\n\n            if (element) {\n                cleanup(e);\n                element.remove();\n                e.preventDefault();\n            }\n        }\n    });\n    document.addEventListener(\"htmx:afterProcessNode\", e => {\n        if (e.target.classList.contains(\"shifu-window\")) {\n            const title = e.target.querySelector(\".shifu-window-title\");\n\n            if (title) {\n                const settings = localStorage.getItem(e.target.id);\n\n                if (settings) {\n                    const position = JSON.parse(settings);\n                    e.target.style.top = position.top;\n                    e.target.style.left = position.left;\n                }\n\n                title.addEventListener(\"mousedown\", startDrag);\n                title.addEventListener(\"mouseup\", endDrag);\n            }\n        }\n    });\n    document.addEventListener(\"htmx:beforeCleanupElement\", cleanup);\n    document.addEventListener(\"htmx:trigger\", e => {\n        if (e.target.classList.contains(\"shifu-window-close\")) {\n            cleanup(e);\n            let window = e.target;\n\n            while (!window.classList.contains(\"shifu-window\")) {\n                window = window.parentNode;\n            }\n\n            window.remove();\n        }\n    });\n    window.addEventListener(\"mousemove\", drag);\n    const save = debounce(target => {\n        localStorage.setItem(target.id, JSON.stringify({\n            top: target.style.top,\n            left: target.style.left\n        }));\n    });\n    let dragging = null;\n    let mouseX, mouseY, zIndex = 0;\n\n    function startDrag(e) {\n        dragging = e.target.parentNode;\n\n        if (dragging.style.zIndex > zIndex) {\n            zIndex = dragging.style.zIndex;\n        }\n\n        zIndex++;\n        dragging.style.zIndex = zIndex;\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    }\n\n    function endDrag() {\n        dragging = null;\n    }\n\n    function drag(e) {\n        if (dragging) {\n            const x = mouseX - e.clientX;\n            const y = mouseY - e.clientY;\n            mouseX = e.clientX;\n            mouseY = e.clientY;\n            dragging.style.top = (dragging.offsetTop - y) + \"px\";\n            dragging.style.left = (dragging.offsetLeft - x) + \"px\";\n            save(dragging);\n        }\n    }\n\n    function cleanup(details) {\n        if (details.target.classList.contains(\"shifu-window\")) {\n            const title = details.target.querySelector(\".shifu-window-title\");\n\n            if (title) {\n                title.removeEventListener(\"mousedown\", startDrag);\n                title.removeEventListener(\"mouseup\", endDrag);\n            }\n        }\n    }\n\n    function debounce(func, timeout = 300) {\n        let timer;\n        return (...args) => {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                func.apply(this, args);\n            }, timeout);\n        };\n    }\n})();\n"],
  "mappings": "OAAC,UAAW,CACR,SAAS,iBAAiB,qBAAsBA,GAAK,CACjD,IAAMC,EAAKD,EAAE,OAAO,aAAa,aAAa,EAE9C,GAAIC,EAAI,CACJ,IAAMC,EAAU,SAAS,eAAeD,CAAE,EAEtCC,IACAC,EAAQH,CAAC,EACTE,EAAQ,OAAO,EACfF,EAAE,eAAe,EAEzB,CACJ,CAAC,EACD,SAAS,iBAAiB,wBAAyBA,GAAK,CACpD,GAAIA,EAAE,OAAO,UAAU,SAAS,cAAc,EAAG,CAC7C,IAAMI,EAAQJ,EAAE,OAAO,cAAc,qBAAqB,EAE1D,GAAII,EAAO,CACP,IAAMC,EAAW,aAAa,QAAQL,EAAE,OAAO,EAAE,EAEjD,GAAIK,EAAU,CACV,IAAMC,EAAW,KAAK,MAAMD,CAAQ,EACpCL,EAAE,OAAO,MAAM,IAAMM,EAAS,IAC9BN,EAAE,OAAO,MAAM,KAAOM,EAAS,IACnC,CAEAF,EAAM,iBAAiB,YAAaG,CAAS,EAC7CH,EAAM,iBAAiB,UAAWI,CAAO,CAC7C,CACJ,CACJ,CAAC,EACD,SAAS,iBAAiB,4BAA6BL,CAAO,EAC9D,SAAS,iBAAiB,eAAgBH,GAAK,CAC3C,GAAIA,EAAE,OAAO,UAAU,SAAS,oBAAoB,EAAG,CACnDG,EAAQH,CAAC,EACT,IAAIS,EAAST,EAAE,OAEf,KAAO,CAACS,EAAO,UAAU,SAAS,cAAc,GAC5CA,EAASA,EAAO,WAGpBA,EAAO,OAAO,CAClB,CACJ,CAAC,EACD,OAAO,iBAAiB,YAAaC,CAAI,EACzC,IAAMC,EAAOC,EAASC,GAAU,CAC5B,aAAa,QAAQA,EAAO,GAAI,KAAK,UAAU,CAC3C,IAAKA,EAAO,MAAM,IAClB,KAAMA,EAAO,MAAM,IACvB,CAAC,CAAC,CACN,CAAC,EACGC,EAAW,KACXC,EAAQC,EAAQC,EAAS,EAE7B,SAASV,EAAUP,EAAG,CAClBc,EAAWd,EAAE,OAAO,WAEhBc,EAAS,MAAM,OAASG,IACxBA,EAASH,EAAS,MAAM,QAG5BG,IACAH,EAAS,MAAM,OAASG,EACxBF,EAASf,EAAE,QACXgB,EAAShB,EAAE,OACf,CAEA,SAASQ,GAAU,CACfM,EAAW,IACf,CAEA,SAASJ,EAAKV,EAAG,CACb,GAAIc,EAAU,CACV,IAAMI,EAAIH,EAASf,EAAE,QACfmB,EAAIH,EAAShB,EAAE,QACrBe,EAASf,EAAE,QACXgB,EAAShB,EAAE,QACXc,EAAS,MAAM,IAAOA,EAAS,UAAYK,EAAK,KAChDL,EAAS,MAAM,KAAQA,EAAS,WAAaI,EAAK,KAClDP,EAAKG,CAAQ,CACjB,CACJ,CAEA,SAASX,EAAQiB,EAAS,CACtB,GAAIA,EAAQ,OAAO,UAAU,SAAS,cAAc,EAAG,CACnD,IAAMhB,EAAQgB,EAAQ,OAAO,cAAc,qBAAqB,EAE5DhB,IACAA,EAAM,oBAAoB,YAAaG,CAAS,EAChDH,EAAM,oBAAoB,UAAWI,CAAO,EAEpD,CACJ,CAEA,SAASI,EAASS,EAAMC,EAAU,IAAK,CACnC,IAAIC,EACJ,MAAO,IAAIC,IAAS,CAChB,aAAaD,CAAK,EAClBA,EAAQ,WAAW,IAAM,CACrBF,EAAK,MAAM,KAAMG,CAAI,CACzB,EAAGF,CAAO,CACd,CACJ,CACJ,GAAG",
  "names": ["e", "id", "element", "cleanup", "title", "settings", "position", "startDrag", "endDrag", "window", "drag", "save", "debounce", "target", "dragging", "mouseX", "mouseY", "zIndex", "x", "y", "details", "func", "timeout", "timer", "args"]
}
