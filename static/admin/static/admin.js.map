{
  "version": 3,
  "sources": ["../assets/js/debounce.js", "../assets/js/trix.js", "../assets/js/main.js"],
  "sourcesContent": ["export function debounce(func, timeout = 300) {\n    let timer;\n    return (...args) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            func.apply(this, args);\n        }, timeout);\n    };\n}\n", "const lang = {\n    attachFiles: \"Attach Files\",\n    bold: \"Bold\",\n    bullets: \"Bullets\",\n    byte: \"Byte\",\n    bytes: \"Bytes\",\n    captionPlaceholder: \"Add a caption\u2026\",\n    code: \"Code\",\n    heading1: \"Heading\",\n    indent: \"Increase Level\",\n    italic: \"Italic\",\n    link: \"Link\",\n    numbers: \"Numbers\",\n    outdent: \"Decrease Level\",\n    quote: \"Quote\",\n    redo: \"Redo\",\n    remove: \"Remove\",\n    strike: \"Strikethrough\",\n    undo: \"Undo\",\n    unlink: \"Unlink\",\n    url: \"URL\",\n    urlPlaceholder: \"Enter a URL\u2026\",\n    GB: \"GB\",\n    KB: \"KB\",\n    MB: \"MB\",\n    PB: \"PB\",\n    TB: \"TB\",\n};\n\nTrix.config.toolbar.getDefaultHTML = () => {\n    return `<div class=\"trix-button-row\">\n      <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"${lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\n      </span>\n\n      <span class=\"trix-button-group trix-button-group--block-tools\" data-trix-button-group=\"block-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-quote\" data-trix-attribute=\"quote\" title=\"${lang.quote}\" tabindex=\"-1\">${lang.quote}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-code\" data-trix-attribute=\"code\" title=\"${lang.code}\" tabindex=\"-1\">${lang.code}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bullet-list\" data-trix-attribute=\"bullet\" title=\"${lang.bullets}\" tabindex=\"-1\">${lang.bullets}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-number-list\" data-trix-attribute=\"number\" title=\"${lang.numbers}\" tabindex=\"-1\">${lang.numbers}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-decrease-nesting-level\" data-trix-action=\"decreaseNestingLevel\" title=\"${lang.outdent}\" tabindex=\"-1\">${lang.outdent}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-increase-nesting-level\" data-trix-action=\"increaseNestingLevel\" title=\"${lang.indent}\" tabindex=\"-1\">${lang.indent}</button>\n      </span>\n\n      <span class=\"trix-button-group-spacer\"></span>\n\n      <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\n      </span>\n    </div>\n\n    <div class=\"trix-dialogs\" data-trix-dialogs>\n      <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\n        <div class=\"trix-dialog__link-fields\">\n          <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" aria-label=\"${lang.url}\" data-trix-validate-href required data-trix-input>\n          <div class=\"trix-button-group\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\n          </div>\n        </div>\n      </div>\n    </div>`\n};\n", "import {debounce} from \"./debounce\";\n\n(function() {\n    document.addEventListener(\"htmx:beforeRequest\", e => {\n        const id = e.target.getAttribute(\"data-window\");\n\n        if (id) {\n            const element = document.getElementById(id);\n\n            if (element) {\n                cleanup(e);\n                element.remove();\n                e.preventDefault();\n            }\n        }\n    });\n    document.addEventListener(\"htmx:afterProcessNode\", e => {\n        if (e.target.classList.contains(\"shifu-window\") || e.target.classList.contains(\"shifu-window-overlay\")) {\n            let target = e.target;\n\n            if (target.classList.contains(\"shifu-window-overlay\")) {\n                target = target.children[0];\n            }\n\n            document.querySelectorAll(\".shifu-window\").forEach(e => e.classList.remove(\"shifu-window-active\"));\n            target.classList.add(\"shifu-window-active\");\n            const title = target.querySelector(\".shifu-window-title\");\n\n            if (title) {\n                const settings = localStorage.getItem(target.id);\n\n                if (settings) {\n                    const position = JSON.parse(settings);\n                    target.style.top = position.top;\n                    target.style.left = position.left;\n                }\n\n                title.addEventListener(\"mousedown\", startDrag);\n                title.addEventListener(\"mouseup\", endDrag);\n            }\n        }\n    });\n    document.addEventListener(\"htmx:beforeCleanupElement\", cleanup);\n    document.addEventListener(\"htmx:trigger\", e => {\n        if (e.target.classList.contains(\"shifu-window-close\")) {\n            cleanup(e);\n            let window = e.target;\n\n            while (!window.classList.contains(\"shifu-window\")) {\n                window = window.parentNode;\n            }\n\n            if (window.parentNode && window.parentNode.classList.contains(\"shifu-window-overlay\")) {\n                window.parentNode.remove();\n            }\n\n            window.remove();\n        }\n    });\n    window.addEventListener(\"mousemove\", drag);\n    const save = debounce(target => {\n        localStorage.setItem(target.id, JSON.stringify({\n            top: target.style.top,\n            left: target.style.left\n        }));\n    });\n    let dragging = null;\n    let mouseX, mouseY, zIndex = 0;\n\n    function startDrag(e) {\n        document.querySelectorAll(\".shifu-window\").forEach(e => e.classList.remove(\"shifu-window-active\"));\n        dragging = e.target.parentNode;\n\n        if (dragging.style.zIndex > zIndex) {\n            zIndex = dragging.style.zIndex;\n        }\n\n        zIndex++;\n        dragging.style.zIndex = zIndex;\n        dragging.classList.add(\"shifu-window-active\");\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    }\n\n    function endDrag() {\n        dragging = null;\n    }\n\n    function drag(e) {\n        if (dragging) {\n            const x = mouseX - e.clientX;\n            const y = mouseY - e.clientY;\n            mouseX = e.clientX;\n            mouseY = e.clientY;\n            dragging.style.top = (dragging.offsetTop - y) + \"px\";\n            dragging.style.left = (dragging.offsetLeft - x) + \"px\";\n            save(dragging);\n        }\n    }\n\n    function cleanup(details) {\n        if (details.target.classList && details.target.classList.contains(\"shifu-window\")) {\n            const title = details.target.querySelector(\".shifu-window-title\");\n\n            if (title) {\n                title.removeEventListener(\"mousedown\", startDrag);\n                title.removeEventListener(\"mouseup\", endDrag);\n            }\n        }\n    }\n\n    window.shifuCloseWindow = (target) => {\n        let window = document.querySelector(target);\n\n        if (!window) {\n            return;\n        }\n\n        while (!window.classList.contains(\"shifu-window\")) {\n            window = window.parentNode;\n        }\n\n        const title = window.querySelector(\".shifu-window-title\");\n\n        if (title) {\n            title.removeEventListener(\"mousedown\", startDrag);\n            title.removeEventListener(\"mouseup\", endDrag);\n        }\n\n        if (window.parentNode && window.parentNode.classList.contains(\"shifu-window-overlay\")) {\n            window.parentNode.remove();\n        }\n\n        window.remove();\n    }\n})();\n\nimport \"./trix\";\n"],
  "mappings": "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",
  "names": ["debounce", "func", "timeout", "timer", "args", "lang", "id", "element", "cleanup", "target", "e", "title", "settings", "position", "startDrag", "endDrag", "window", "drag", "save", "debounce", "dragging", "mouseX", "mouseY", "zIndex", "x", "y", "details"]
}
